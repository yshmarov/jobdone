%h4
  .fa.fa-tachometer-alt
  Dashboard
%p
- unless Job.any?
  .card
    .card-header
      .fa.fa-rocket
      Getting started
    .card-body
      %h5
        - if Tenant.current_tenant.plan != 'free'
          - unless Member.count >= 2
            %span.badge.badge-pill.badge-danger 0
            = link_to "Invite Employees to your organization", new_member_path
          - else
            %span.badge.badge-pill.badge-success 0
            %del
              Invite Employees to your organization
          %hr
        - unless Location.any?
          %span.badge.badge-pill.badge-danger 1
          = link_to 'Add a Location', new_location_path
        - else
          %span.badge.badge-pill.badge-success 1
          %del
            Add a Location
        %hr
        - unless Service.any?
          %span.badge.badge-pill.badge-danger 2
          = link_to 'Add a Service', new_service_path
        - else
          %span.badge.badge-pill.badge-success 2
          %del
            Add a Service
        %hr
        - unless Client.any?
          %span.badge.badge-pill.badge-danger 3
          = link_to 'Add a Client', new_client_path
        - else
          %span.badge.badge-pill.badge-success 3
          %del
            Add a Client
        %hr
        - unless Job.any?
          %span.badge.badge-pill.badge-danger 4
          = link_to 'Add a Job', new_job_path
        - else
          %span.badge.badge-pill.badge-success 4
          %del
            Add a Job
%p
.row
  .col-xl-4
    .card
      .card-header
        .fa.fa-chart-line
        New Jobs in the last 30 days
      .card-body
        = Job.where('created_at >= ?', 1.month.ago).count
    %p
  .col-xl-4
    .card
      .card-header
        .fa.fa-chart-line
        New Clients in the last 30 days
      .card-body
        = Client.where('created_at >= ?', 1.month.ago).count
    %p
  .col-xl-4
    .card
      .card-header
        .fa.fa-chart-line
        Turnover in the last 30 days
      .card-body
        = number_to_currency(@total_confirmed_earnings, :unit => "$")
%p
.row
  .col-xl-4
    .card-header
      .fa.fa-bell
      Activity
      .float-right
        = link_to 'more', activity_path, class: 'btn btn-sm btn-primary'
    .card
      =  render 'home/activity'
    %p
  .col-xl-4
    .card
      .card-header
        .fa.fa-calendar
        Upcoming appointments
      -  Job.all.where(member: current_user.member).where("starts_at > ?", Time.zone.now-15.minutes).limit(5).each do |job|

        %li.list-group-item
          = link_to '', job, class: "btn btn-success fa fa-eye btn-sm", title: 'Show', 'data-toggle' => 'tooltip', 'data-placement' => 'top'
          #{job.starts_at.strftime('%d/%b/%Y %H:%M')}
          = job.client
          = job.service
    %p
  .col-xl-4
    .card-header
      .fa.fa-calendar-check
      Mark attendance
      .float-right
        = link_to "#{Job.mark_attendance.count} Tasks", mark_attendance_jobs_path, class: 'btn btn-sm btn-primary'
    .card
      = render 'jobs/index'

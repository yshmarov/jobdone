- model_class = Service
= search_form_for @q, url: services_path do |f|
  %p
  .card.card-default
    .container-fluid
      .card-heading
        %h4.card-title.float-left{:style => "padding-top: 7.5px;"} 
          %b
            =t '.title', :default => model_class.model_name.human.pluralize.titleize
        %h4.card-title.float-right{:style => "padding-top: 7.5px;"} 
          %button.btn.btn-sm.btn-default{"data-target" => "#accordion", "data-toggle" => "collapse", :type => "button"}
            .fa.fa-search
            Search
          = link_to '', services_path, class: "btn btn-secondary fa fa-redo", title: 'Refresh', 'data-toggle' => 'tooltip', 'data-placement' => 'top'
          - if policy(Service).create?
            = link_to t('.new', :default => t("helpers.links.new")), new_service_path, class: 'btn btn-sm btn-primary'
    #accordion.collapse
      .card-header
        .row
          .col-md-4
            Category
            /= f.collection_select :office_name_cont, Office.all, :name, :name, include_blank: true
            = f.select :service_category_name_cont, options_from_collection_for_select(ServiceCategory.all, :name, :name, @q.service_category_name_cont), { :include_blank => true }, :class => "form-control"
            /= f.search_field :service_category_name_cont, class: "form-control", style: 'float: left; width: 100%; display: block', placeholder: "Category"
            %br
              Name
              = f.text_field :name_cont, class: "form-control", placeholder: "Name", autofocus: true
            = f.submit
.table-responsive
  %table#table1
    %thead
      %tr
        /%th
        %th
        %th
        %th= sort_link @q, :service_category_name, "Category"
        %th= sort_link @q, :name, "Name"
        %th Description
        %th= sort_link @q, :duration, "Duration"
        %th= sort_link @q, :client_price, "From Client, #{Tenant.current_tenant.default_currency.upcase}"
        %th= sort_link @q, :member_percent, "Employee %"
        %th= sort_link @q, :member_price, "To Employee, #{Tenant.current_tenant.default_currency.upcase}"
        %th= sort_link @q, :status, "Status"
        %th= sort_link @q, :jobs_count, "Jobs"
  
    %tbody
      - @services.each do |service|
        %tr
          /%td= link_to 'Show', service, class: 'btn btn-sm btn-primary'
          %td= link_to '', edit_service_path(service), class: "btn btn-warning fa fa-edit btn-sm" if policy(service).edit?
          %td
            - unless service.jobs.any?
              = link_to '', service, method: :delete, data: { confirm: 'Are you sure?' }, class: "btn btn-danger fa fa-trash btn-sm" if policy(service).destroy?
            - else
              = link_to '', service, method: :delete, data: { confirm: 'Are you sure?' }, class: "btn btn-danger fa fa-trash btn-sm disabled" if policy(service).destroy?
          %td= service.service_category
          %td= service.name
          %td= service.description
          %td= service.duration
          %td= service.client_price_cents
          %td= service.member_percent
          %td= service.member_price_cents
          %td= status_label(service.status)
          %td= service.jobs_count
.container
  = will_paginate @services, renderer: WillPaginate::ActionView::BootstrapLinkRenderer
%br

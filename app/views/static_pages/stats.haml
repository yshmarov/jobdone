%h4
  Tenants:
  = Tenant.count
  Users:
  = User.count
  Members:
  = Member.unscoped.count
.table-responsive
  %table#table1
    %thead
      %tr
        %th= sort_link @ransack_tenants, :id, "ID"
        %th= sort_link @ransack_tenants, :name, "Name"
        %th= sort_link @ransack_tenants, :plan, "Plan"
        %th= sort_link @ransack_tenants, :locale, "Locale"
        %th= sort_link @ransack_tenants, :default_currency, "Currency"
        %th= sort_link @ransack_tenants, :created_at, "Created"

        %th.bg-warning Client
        %th.bg-warning Service
        %th.bg-warning Event
        %th.bg-warning Job
        %th.bg-warning Comment
        %th.bg-warning InboundPayment
        %th.bg-warning Member
        %th.bg-warning Location
    %tbody
      - @tenants.each do |tenant|
        %tr.bg-secondary
          %td= tenant.id
          %td= tenant.name
          %td= tenant.plan
          %td= tenant.locale
          %td= tenant.default_currency
          %td
            = tenant.created_at.strftime("%d/%m/%y")
            (#{distance_of_time_in_words Time.now, tenant.created_at} ago)
          %td= Client.unscoped.where(tenant_id: tenant.id).count 
          %td= Service.unscoped.where(tenant_id: tenant.id).count 
          %td= Event.unscoped.where(tenant_id: tenant.id).count 
          %td= Job.unscoped.where(tenant_id: tenant.id).count 
          %td= Comment.unscoped.where(tenant_id: tenant.id).count 
          %td= InboundPayment.unscoped.where(tenant_id: tenant.id).count 
          %td= Member.unscoped.where(tenant_id: tenant.id).count 
          %td= Location.unscoped.where(tenant_id: tenant.id).count 
        %thead.bg-light
          %tr
            %th UserID
            %th Name
            %th Email
            %th Confirmed?
            %th Phone
        %tbody.bg-light
          - Member.all.unscoped.where(tenant_id: tenant.id).each do |member|
            %tr
              %td= member.id
              %td= member
              - if member.user.present?
                %td= member.user.email
                %td= member.user.confirmed_at.present?
              %td= member.phone_number
%p
.container.table-responsive
  = will_paginate @tenants, renderer: WillPaginate::ActionView::BootstrapLinkRenderer
%br
/- set_var 'locale', Tenant.current_tenant.locale
/- set_var 'events', @events.map{|e| {title: e.client.full_name.to_s + " (" + e.jobs.collect{|r| r.service.name}.join(",").to_s+")", start: e.starts_at, end: e.ends_at, url: event_path(e), color: e.status_color}}
/- set_var 'events', @jobs.map{|e| {title: e.event.client.full_name.to_s + " (" + e.service.name.to_s+")", start: e.event.starts_at, end: e.event.ends_at, url: event_path(e.event), color: e.event.status_color}}
- model_class = Location
.row
  .col-lg-4
    .card
      .card-header
        .fa.fa-map-marker-alt
        =t '.title', :default => model_class.model_name.human.titleize
        .float-right
          = link_to '', edit_location_path(@location), class: "btn btn-warning fa fa-edit btn-sm", title: 'Edit', 'data-toggle' => 'tooltip', 'data-placement' => 'top' if policy(@location).update?
          = link_to '', @location, method: :delete, data: { confirm: 'Are you sure?' }, class: "btn btn-danger fa fa-trash btn-sm" if policy(@location).destroy?
      .card-body
        %b= model_class.human_attribute_name(:name) + ':'
        = @location.name
        .row
        = active_label(@location.active)
        - if @location.online_booking?
          .badge.badge-success
            = model_class.human_attribute_name(:online_booking)
        - if @location.address.present?
          .row.mt-1
          .form-inline
            .fa.fa-map-marker-alt.mr.mr-2
            = @location.address_line
        .row

        - if @location.phone_number.present?
          = link_to "tel:#{@location.phone_number}", class: "btn btn-primary btn-sm" do
            .fa.fa-phone
        - if @location.whatsapp.present?
          /= link_to "https://api.whatsapp.com/send?phone=380505532698&text=&source=&data=", class: "button", :target => "_blank" do
          = link_to "https://wa.me/#{@location.whatsapp}", class: "btn btn-success btn-sm mr-1", :target => "_blank" do
            .fab.fa-whatsapp
        - if @location.viber.present?
          = link_to "viber://chat?number=#{@location.viber}", class: "btn btn-purple btn-sm mr-1" do
            .fab.fa-viber
        - if @location.telegram.present?
          = link_to "tg://resolve?domain=#{@location.telegram}", class: "btn btn-info btn-sm mr-1" do
            .fab.fa-telegram-plane
        - if @location.email.present?
          = link_to "mailto:#{@location.email}", class: "btn btn-secondary btn-sm mr-1" do
            .fa.fa-envelope

        - if @location.operating_hours.any?
          %hr
          - @location.operating_hours.each do |operating_hour|
            .row
            = Date::ABBR_DAYNAMES[operating_hour.day_of_week]
            .float-right
              = operating_hour.opens.strftime("%H:%M")
              \-
              = operating_hour.closes.strftime("%H:%M")
        %hr
        /ADMIN - stats
        - if current_user.has_role?(:admin)
          .fa.fa-calendar-check
          = number_to_currency(@location.events_amount_sum_cents, unit: "#{Tenant.current_tenant.default_currency.upcase}", format: "%n %u")
          (#{@location.events_count})
          .row
          /.fa.fa-balance-scale
          .fas.fa-cash-register
          = number_to_currency(@location.balance_cents, unit: "#{Tenant.current_tenant.default_currency.upcase}", format: "%n %u")
          /.row
          /.fa.fa-hand-holding-usd
    %p
/  .col-lg-8
/    %ul#myTab.nav.nav-tabs{:role => "tablist"}
/      %li.nav-item
/        %a#zero-tab.nav-link.active{"aria-controls" => "zero", "aria-selected" => "true", "data-toggle" => "tab", :href => "#zero", :role => "tab"}
/          .fa.fa-calendar-alt
/          = t('sidebar.calendar')
/    #myTabContent.tab-content
/      #zero.tab-pane.fade.show.active{"aria-labelledby" => "zero-tab", :role => "tabpanel"}
/        %br
/        #event_calendar
/